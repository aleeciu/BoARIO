
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>boario.simulation module &#8212; BoARIO  documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/styles/pydata-sphinx-theme.css" type="text/css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/js/custom.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="boario.model_base module" href="boario.model_base.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">BoARIO</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../intro.html">
  BoARIO
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../terminology.html">
  Terminology
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../math.html">
  Mathematical background
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../usage.html">
  Detailled examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../development.html">
  Contributing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../boario-events.html">
  How to define Events
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../api_references.html">
  API Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <p class="last-updated">
Last updated on Sep 06, 2022.<br>
</p>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="modules.html">
   boario
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="boario.html">
     boario package
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="boario.event.html">
       boario.event module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="boario.extended_models.html">
       boario.extended_models module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="boario.indicators.html">
       boario.indicators module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="boario.model_base.html">
       boario.model_base module
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       boario.simulation module
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="module-boario.simulation">
<span id="boario-simulation-module"></span><h1>boario.simulation module<a class="headerlink" href="#module-boario.simulation" title="Permalink to this headline">Â¶</a></h1>
<p>Simulation module</p>
<p>This module defines the Simulation object, which represent a BoARIO simulation environment.</p>
<dl class="py class">
<dt id="boario.simulation.Simulation">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Simulation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mrio_system</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pymrio.core.mriosystem.IOSystem</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modeltype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'ARIOBase'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This class defines a simulation object with a set of parameters and an IOSystem.</p>
<p>This Class wraps an <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel" title="boario.model_base.ARIOBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ARIOBaseModel</span></code></a> or <a class="reference internal" href="boario.extended_models.html#boario.extended_models.ARIOModelPsi" title="boario.extended_models.ARIOModelPsi"><code class="xref py py-class docutils literal notranslate"><span class="pre">ARIOModelPsi</span></code></a>, and create the context for
simulations using this model. It stores execution parameters as well as events perturbing
the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) â Parameters to run the simulation with. If str or Path, it must lead
to a json file containing a dictionary of the parameters.</p></li>
<li><p><strong>results_storage</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><em>pathlib.Path</em></a>) â Path to store the results to.</p></li>
<li><p><strong>model</strong> (<em>Union</em><em>[</em><a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel" title="boario.model_base.ARIOBaseModel"><em>ARIOBaseModel</em></a><em>, </em><a class="reference internal" href="boario.extended_models.html#boario.extended_models.ARIOModelPsi" title="boario.extended_models.ARIOModelPsi"><em>ARIOModelPsi</em></a><em>]</em>) â The model to run the simulation with.</p></li>
<li><p><strong>current_day</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) â Tracks the number of <cite>days</cite> elapsed since simulation start.
This may differs from the number of <cite>steps</cite> if the parameter <cite>model_time_step</cite> differs from 1 day as <cite>current_day</cite> is actually <cite>step</cite> * <cite>model_time_step</cite>.</p></li>
<li><p><strong>n_days_to_sim</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) â The total number of <cite>days</cite> to simulate.</p></li>
<li><p><strong>events</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>[</em><a class="reference internal" href="boario.event.html#boario.event.Event" title="boario.event.Event"><em>Event</em></a><em>]</em>) â The list of events to shock the model with during the simulation.</p></li>
<li><p><strong>current_events</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>[</em><a class="reference internal" href="boario.event.html#boario.event.Event" title="boario.event.Event"><em>Event</em></a><em>]</em>) â The list of events that</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.10)"><strong>TypeError</strong></a> â This error is raised when parameters files (for either the simulation or the mrio table) is not of a correct type.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.10)"><strong>FileNotFoundError</strong></a> â This error is raised when one of the required file to initialize
    the simulation was not found and should print out which one.</p></li>
</ul>
</dd>
</dl>
<p>Initialisation of a Simulation object uses these parameters</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>params</strong> (<em>Union[dict, str, pathlib.Path]</em>) â Parameters to run the simulation with. If str or Path, it must lead
to a json file containing a dictionary of the parameters.</p></li>
<li><p><strong>mrio_system</strong> (<em>Union[IOSystem, str, pathlib.Path, None], default: None</em>) â <code class="docutils literal notranslate"><span class="pre">pymrio.IOSystem</span></code> to run the simulation with. If str or Path, it must
lead to either :</p>
<p>1) a pickle file of an IOSystem that was previously
generated with the pymrio package (be careful that such files are
not cross-system compatible) or,
2) a directory loadable with <code class="docutils literal notranslate"><span class="pre">pymrio.load_all</span></code> (see <a class="reference external" href="https://pymrio.readthedocs.io/en/latest/notebooks/load_save_export.html">Loading, saving and exporting pymrio data</a>).</p>
</li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="boario.simulation.Simulation.loop">
<code class="sig-name descname"><span class="pre">loop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.loop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.loop" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Launch the simulation loop.</p>
<p>This method launch the simulation for the number of steps to simulate
described by the attribute <code class="docutils literal notranslate"><span class="pre">n_days_to_sim</span></code>, calling the
<a class="reference internal" href="#boario.simulation.Simulation.next_step" title="boario.simulation.Simulation.next_step"><code class="xref py py-meth docutils literal notranslate"><span class="pre">next_step()</span></code></a> method. For convenience, it dumps the
parameters used in the logs just before running the loop. Once the loop
is completed, it flushes the different memmaps generated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>progress</strong> (<em>bool, default: True</em>) â If True show a progress bar of the loop in the console.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.next_step">
<code class="sig-name descname"><span class="pre">next_step</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">check_period</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_steps_check</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_failing_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.next_step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.next_step" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Advance the model run by one step.</p>
<p>This method wraps all computations and logging to proceed to the next
step of the simulation run. First it checks if an event is planned to
occur at the current step and if so, shocks the model with the
corresponding event. Then it :</p>
<ol class="arabic simple">
<li><p>Computes the production required by demand (using <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.calc_prod_reqby_demand" title="boario.model_base.ARIOBaseModel.calc_prod_reqby_demand"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calc_prod_reqby_demand()</span></code></a>)</p></li>
<li><p>Computes the production capacity vector of the current step (using <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.calc_production_cap" title="boario.model_base.ARIOBaseModel.calc_production_cap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calc_production_cap()</span></code></a>)</p></li>
<li><p>Computes the actual production vector for the step (using <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.calc_production" title="boario.model_base.ARIOBaseModel.calc_production"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calc_production()</span></code></a>)</p></li>
<li><p>Distribute the actual production towards the different demands (intermediate, final, rebuilding) and the changes in the stocks matrix (using <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.distribute_production" title="boario.model_base.ARIOBaseModel.distribute_production"><code class="xref py py-meth docutils literal notranslate"><span class="pre">distribute_production()</span></code></a>)</p></li>
<li><p>Computes the orders matrix for the next step (using <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.calc_orders" title="boario.model_base.ARIOBaseModel.calc_orders"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calc_orders()</span></code></a>)</p></li>
<li><p>Computes the new overproduction vector for the next step (using <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.calc_overproduction" title="boario.model_base.ARIOBaseModel.calc_overproduction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calc_overproduction()</span></code></a>)</p></li>
</ol>
<p>See <a class="reference internal" href="../math.html#boario-math"><span class="std std-ref">Mathematical background</span></a> section for more in depth information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>check_period</strong> (<em>int, default: 10</em>) â [Deprecated] Number of steps between each crash/equilibrium checking.</p></li>
<li><p><strong>min_steps_check</strong> (<em>int, default: None</em>) â [Deprecated] Minimum number of steps before checking for crash/equilibrium. If none, it is set to a fifth of the number of steps to simulate.</p></li>
<li><p><strong>min_failing_regions</strong> (<em>int, default: None</em>) â [Deprecated] Minimum number of âfailing regionsâ required to consider the economy has âcrashedâ (see <code class="xref py py-func docutils literal notranslate"><span class="pre">check_crash()</span></code>:).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.update_events">
<code class="sig-name descname"><span class="pre">update_events</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.update_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.update_events" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Update events status</p>
<p>This method cycles through the events defines in the <code class="docutils literal notranslate"><span class="pre">current_events</span></code> attribute and sets their <code class="docutils literal notranslate"><span class="pre">rebuildable</span></code> attribute.
An event is considered rebuildable if its <code class="docutils literal notranslate"><span class="pre">duration</span></code> is over (i.e. the number of days elapsed since it shocked the model is greater than <code class="docutils literal notranslate"><span class="pre">occurence_time</span></code> + <code class="docutils literal notranslate"><span class="pre">duration</span></code>).
This method also logs the moment an event starts rebuilding.</p>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.read_events_from_list">
<code class="sig-name descname"><span class="pre">read_events_from_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.read_events_from_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.read_events_from_list" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Import a list of events (as a list of dictionaries) into the model.</p>
<p>Also performs various checks on the events to avoid badly written events.
See <a class="reference internal" href="../boario-events.html#boario-events"><span class="std std-ref">How to define Events</span></a> to understand how to write events dictionnaries or JSON files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>events_list</strong> â List of events as dictionnaries.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add boario module to python path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;../ARIO3/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">boario.simulation</span> <span class="k">as</span> <span class="nn">sim</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pathlib</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load up model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mrio_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/mrio_file.pkl&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;path/to/model_params.json&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">params</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">mrio_path</span><span class="p">,</span> <span class="n">modeltype</span><span class="o">=</span><span class="s2">&quot;BaseARIO&quot;</span><span class="p">)</span>
<span class="go">14:59:05 [INFO] - [simulation.py &gt; __init__() &gt; 77] - Initializing new simulation instance</span>
<span class="go">14:59:05 [INFO] - [simulation.py &gt; __init__() &gt; 93] - Loading simulation parameters from dict</span>
<span class="go">14:59:05 [DEBUG] - [model_base.py &gt; __init__() &gt; 156] - Initiating new ARIOBaseModel instance</span>
<span class="go">14:59:05 [INFO] - [model_base.py &gt; __init__() &gt; 160] - IO system metadata :</span>
<span class="go">&gt;IO Table Metadata here&lt;</span>
<span class="go">14:59:05 [INFO] - [model_base.py &gt; __init__() &gt; 161] - Simulation parameters:</span>
<span class="go">&gt;Simulation parameters here&lt;</span>
<span class="go">14:59:05 [INFO] - [model_base.py &gt; __init__() &gt; 167] - Results storage is: path/to/results/</span>
<span class="go">14:59:05 [INFO] - [model_base.py &gt; __init__() &gt; 182] - Monetary unit from params is: 1000000</span>
<span class="go">14:59:05 [INFO] - [model_base.py &gt; __init__() &gt; 183] - Monetary unit from loaded mrio is: M.EUR</span>
<span class="go">14:59:06 [INFO] - [simulation.py &gt; __init__() &gt; 159] - Initialized !</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define list of events (most often this list should be generated from a JSON file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Event 1&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;aff-regions&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;region_1&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;dmg-distrib-regions&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;dmg-distrib-sectors-type&quot;</span><span class="p">:</span> <span class="s2">&quot;gdp&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;dmg-distrib-sectors&quot;</span><span class="p">:</span> <span class="p">[],</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;occur&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;q_dmg&quot;</span><span class="p">:</span> <span class="mi">5000000</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;aff-sectors&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;sector_1&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;sector_4&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;sector_6&quot;</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;rebuilding-sectors&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="s1">&#39;Construction (45)&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="s1">&#39;Cultivation in general&#39;</span><span class="p">:</span> <span class="mf">0.005</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="s1">&#39;Financial intermediation, insurance and pension funding (65)&#39;</span><span class="p">:</span> <span class="mf">0.005</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="s1">&#39;Manufacture of ceramic goods&#39;</span><span class="p">:</span> <span class="mf">0.09</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="s1">&#39;Manufacture of construction products and cement&#39;</span><span class="p">:</span> <span class="mf">0.60</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">read_events_from_list</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>
<span class="go">15:00:25 [INFO] - [simulation.py &gt; read_events_from_list() &gt; 417] - Reading events from given list and adding them to the model</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.shock">
<code class="sig-name descname"><span class="pre">shock</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_to_add_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.shock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.shock" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Shocks the model with an event.</p>
<p>Sets the rebuilding demand and the share of production allocated toward
it in the model.</p>
<p>First, if multiple regions are affected, it computes the vector of how damages are distributed across these,
using the <code class="docutils literal notranslate"><span class="pre">dmg_distrib_across_regions</span></code> attribute of the <a class="reference internal" href="boario.event.html#boario.event.Event" title="boario.event.Event"><code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code></a> object.
Then it computes the vector of how regional damages are distributed across affected sectors using
the <code class="docutils literal notranslate"><span class="pre">dmg_distrib_across_sector</span></code> and <code class="docutils literal notranslate"><span class="pre">dmg_distrib_across_sector_type</span></code> attributes.
This <code class="docutils literal notranslate"><span class="pre">n_regions</span></code> * <code class="docutils literal notranslate"><span class="pre">n_sectors</span></code> sized vector hence stores the damage (i.e. capital destroyed) for all industries.</p>
<p>This method also computes the <cite>rebuilding demand</cite> matrix, the demand addressed to the rebuilding
industries consequent to the shock, and sets the initial vector of production share dedicated to rebuilding.</p>
<p>See <a class="reference internal" href="../boario-events.html#boario-events"><span class="std std-ref">How to define Events</span></a> for further detail on how to parameter these distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event_to_add_id</strong> (<em>int</em>) â The id (rank it the <code class="docutils literal notranslate"><span class="pre">events</span></code> list) of the event to shock the model with.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><strong>ValueError</strong></a> â Raised if the production share allocated to rebuilding (in either
    the impacted regions or the others) is not in [0,1].</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.reset_sim_with_same_events">
<code class="sig-name descname"><span class="pre">reset_sim_with_same_events</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.reset_sim_with_same_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.reset_sim_with_same_events" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Resets the model to its initial status (without removing the events).</p>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.reset_sim_full">
<code class="sig-name descname"><span class="pre">reset_sim_full</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.reset_sim_full"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.reset_sim_full" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Resets the model to its initial status and remove all events.</p>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.update_params">
<code class="sig-name descname"><span class="pre">update_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.update_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.update_params" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Update the parameters of the model.</p>
<p>Replace the <code class="docutils literal notranslate"><span class="pre">params</span></code> attribute with <code class="docutils literal notranslate"><span class="pre">new_params</span></code> and logs the update.
This method also checks if the directory specified to save the results exists and create it otherwise.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be aware this method calls <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.update_params" title="boario.model_base.ARIOBaseModel.update_params"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update_params()</span></code></a>, which resets the memmap files located in the results directory !</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_params</strong> (<em>dict</em>) â New dictionnary of parameters to use.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.write_index">
<code class="sig-name descname"><span class="pre">write_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.write_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.write_index" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Write the index of the dataframes used in the model in a json file.</p>
<p>See <a class="reference internal" href="boario.model_base.html#boario.model_base.ARIOBaseModel.write_index" title="boario.model_base.ARIOBaseModel.write_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_index()</span></code></a> for a more detailed documentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index_file</strong> (<em>Union[str, pathlib.Path]</em>) â name of the file to save the indexes to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="boario.simulation.Simulation.read_events">
<code class="sig-name descname"><span class="pre">read_events</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/boario/simulation.html#Simulation.read_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#boario.simulation.Simulation.read_events" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read events from a json file.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version Method: </span>wasnât checked recently.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>events_file</strong> â path to a json file</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.10)"><strong>FileNotFoundError</strong></a> â If file does not exist</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>FIXME: Add docs.</p>
</dd></dl>

</dd></dl>

</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="boario.model_base.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">boario.model_base module</p>
        </div>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Samuel Juhel.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.3.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>